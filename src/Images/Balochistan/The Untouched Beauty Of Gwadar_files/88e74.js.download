jQuery(document).ready(function(){wow=new WOW({animateClass:'animated',offset:100});wow.init();});jQuery(function(){var ct_vote=jQuery('.ct-vote');var ct_progress_wrap=ct_vote.find('.ct-progress');var ct_progress_inner=ct_progress_wrap.find('.inner');var ct_progress=ct_progress_inner.find('.progress-bar');var post_id=jQuery('input[name=post_id]').val();var tooltip=jQuery('.ct-vote').find('p');var rtl=jQuery('input[name=hidden_rtl]').val();var static_text_str=jQuery('input[name=hidden_static_text]').val();var static_text=typeof(static_text_str)!='undefined'?static_text_str.split(","):new Array();var post_id_voted_cookie=readCookie('post_id_voted');var user_voted=jQuery('input[name=hidden_flag]').val();var guest_voted=false;if(post_id_voted_cookie!=null)
{var parts=post_id_voted_cookie.split("-");for(i=0;i<parts.length;i++)
{if(parts[i]==post_id)
guest_voted=true;}}
if(typeof(user_voted)=='undefined')
{if(!guest_voted)
{ajax_user_vote(ct_vote,ct_progress_wrap,ct_progress_inner,ct_progress,post_id,tooltip,static_text,rtl);}
else
{show_msg(ct_progress_inner,tooltip,static_text);}}
else
{if(user_voted==false)
{ajax_user_vote(ct_vote,ct_progress_wrap,ct_progress_inner,ct_progress,post_id,tooltip,static_text,rtl);}
else
{show_msg(ct_progress_inner,tooltip,static_text);}}});function ajax_user_vote(ct_vote,ct_progress_wrap,ct_progress_inner,ct_progress,post_id,tooltip,static_text,rtl)
{var ct_vote=jQuery('.ct-vote');var ct_progress_wrap=ct_vote.find('.ct-progress');var ct_progress_inner=ct_progress_wrap.find('.inner');var ct_progress=ct_progress_inner.find('.progress-bar');var ctWidthDivider=jQuery(ct_progress_wrap).width()/100;var title_obj=ct_vote.find('.rating_title');var score_obj=ct_vote.find('.score');var total_us_rate_obj=ct_vote.find('.total_user_rate');var initial_total_user_rate=jQuery('input[name=hidden_total_user_rate]').val();var initial_avg_user_rate=jQuery('input[name=hidden_avg_score_rate]').val();var vote_str=initial_total_user_rate>1?static_text[2]:static_text[4];ct_progress_inner.on('mousemove click mouseleave mouseenter',function(e){if(e.type=='mousemove'||e.type=='click')
{var ctParentOffset=jQuery(this).parent().offset();var ctBaseX=Math.ceil((e.pageX-ctParentOffset.left)/ctWidthDivider);if(rtl==false)
{var ctFinalX=ctBaseX+'%';var score=ctBaseX/10;}
else
{var ctFinalX=100-ctBaseX+'%';var score=(10-ctBaseX/10).toFixed(1);}
title_obj.html(static_text[0]);total_us_rate_obj.html('');score_obj.html(score);ct_progress.css('width',ctFinalX);}
if(e.type=='mouseleave')
{title_obj.html(static_text[1]+':');total_us_rate_obj.html('('+initial_total_user_rate+' '+vote_str+')');score_obj.html(initial_avg_user_rate);ct_progress.css('width',initial_avg_user_rate*10+'%');}
if(e.type=='click'){ct_progress_inner.off('mousemove click mouseleave mouseenter');jQuery.ajax({type:'post',cache:false,url:cactus.ajaxurl,data:{'score':score,'post_id':post_id,'action':'add_user_rate'},success:function(responseText)
{title_obj.html(static_text[1]+':');initial_total_user_rate=(parseInt(initial_total_user_rate)+1);total_us_rate_obj.html('('+initial_total_user_rate+' '+vote_str+')');avg_after_vote=(((parseInt(initial_total_user_rate)-1)*parseFloat(initial_avg_user_rate)+parseFloat(score))/initial_total_user_rate);score_obj.html(avg_after_vote.toFixed(1));ct_progress.css('width',avg_after_vote.toFixed(1)*10+'%');show_msg(ct_progress_inner,tooltip,static_text);}});}});}
function show_msg(ct_progress_inner,tooltip,static_text){tooltip.html(static_text[3]);ct_progress_inner.hover(function(){if(!tooltip.hasClass('active')){tooltip.addClass('active');};},function(){if(tooltip.hasClass('active')){tooltip.removeClass('active');};});};jQuery(document).ready(function(){var post_id=jQuery('input[name=post_id]').val();var rtl=jQuery('input[name=hidden_rtl]').val();var static_text_str=jQuery('input[name=hidden_static_text]').val();var static_text=typeof(static_text_str)!='undefined'?static_text_str.split(","):new Array();var user_rating_block=jQuery('.rating-block');var tooltip=user_rating_block.find('p');var initial_total_user_rate=jQuery('input[name=hidden_total_user_rate]').val();var initial_avg_user_rate=jQuery('input[name=hidden_avg_score_rate]').val();var post_id_voted_cookie=readCookie('post_id_voted');var user_voted=jQuery('input[name=hidden_flag]').val();var guest_voted=false;var read_only=false;if(post_id_voted_cookie!=null)
{var parts=post_id_voted_cookie.split("-");for(i=0;i<parts.length;i++)
{if(parts[i]==post_id)
guest_voted=true;}}
if(typeof(user_voted)=='undefined')
{if(!guest_voted)
{}
else
{show_msg_star_type(user_rating_block,tooltip,static_text);read_only=true;}}
else
{if(user_voted==false)
{}
else
{show_msg_star_type(user_rating_block,tooltip,static_text);read_only=true;}}
jQuery('#rating-id').raty({half:true,readOnly:read_only,score:function(){return jQuery(this).attr('data-score');},click:function(rating,evt){var post_id=jQuery('input[name=post_id]').val();var score=rating*20/10;jQuery.ajax({type:'post',cache:false,url:cactus.ajaxurl,data:{'score':score,'post_id':post_id,'action':'add_user_rate'},success:function(responseText)
{read_only=true;jQuery('#rating-id').raty({half:true,readOnly:read_only,score:function(){return rating;}});show_msg_star_type(user_rating_block,tooltip,static_text);}});}});});function show_msg_star_type(user_rating_block,tooltip,static_text){tooltip.html(static_text[3]);user_rating_block.hover(function(){if(!tooltip.hasClass('active')){tooltip.addClass('active');};},function(){if(tooltip.hasClass('active')){tooltip.removeClass('active');};});};function readCookie(name)
{var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
;/*! WOW - v0.1.6 - 2014-03-19
* Copyright (c) 2014 Matthieu Aussaguel; Licensed MIT */(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(){}return a.prototype.extend=function(a,b){var c,d;for(c in a)d=a[c],null!=d&&(b[c]=d);return b},a.prototype.isMobile=function(a){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)},a}(),this.WOW=function(){function c(a){null==a&&(a={}),this.scrollCallback=b(this.scrollCallback,this),this.scrollHandler=b(this.scrollHandler,this),this.start=b(this.start,this),this.scrolled=!0,this.config=this.util().extend(a,this.defaults)}return c.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0},c.prototype.init=function(){var a;return this.element=window.document.documentElement,"interactive"===(a=document.readyState)||"complete"===a?this.start():document.addEventListener("DOMContentLoaded",this.start)},c.prototype.start=function(){var a,b,c,d;if(this.boxes=this.element.getElementsByClassName(this.config.boxClass),this.boxes.length){if(this.disabled())return this.resetStyle();for(d=this.boxes,b=0,c=d.length;c>b;b++)a=d[b],this.applyStyle(a,!0);return window.addEventListener("scroll",this.scrollHandler,!1),window.addEventListener("resize",this.scrollHandler,!1),this.interval=setInterval(this.scrollCallback,50)}},c.prototype.stop=function(){return window.removeEventListener("scroll",this.scrollHandler,!1),window.removeEventListener("resize",this.scrollHandler,!1),null!=this.interval?clearInterval(this.interval):void 0},c.prototype.show=function(a){return this.applyStyle(a),a.className=""+a.className+" "+this.config.animateClass},c.prototype.applyStyle=function(a,b){var c,d,e;return d=a.getAttribute("data-wow-duration"),c=a.getAttribute("data-wow-delay"),e=a.getAttribute("data-wow-iteration"),a.setAttribute("style",this.customStyle(b,d,c,e))},c.prototype.resetStyle=function(){var a,b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.setAttribute("style","visibility: visible;"));return e},c.prototype.customStyle=function(a,b,c,d){var e;return e=a?"visibility: hidden; -webkit-animation-name: none; -moz-animation-name: none; animation-name: none;":"visibility: visible;",b&&(e+="-webkit-animation-duration: "+b+"; -moz-animation-duration: "+b+"; animation-duration: "+b+";"),c&&(e+="-webkit-animation-delay: "+c+"; -moz-animation-delay: "+c+"; animation-delay: "+c+";"),d&&(e+="-webkit-animation-iteration-count: "+d+"; -moz-animation-iteration-count: "+d+"; animation-iteration-count: "+d+";"),e},c.prototype.scrollHandler=function(){return this.scrolled=!0},c.prototype.scrollCallback=function(){var a;return this.scrolled&&(this.scrolled=!1,this.boxes=function(){var b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],a&&(this.isVisible(a)?this.show(a):e.push(a));return e}.call(this),!this.boxes.length)?this.stop():void 0},c.prototype.offsetTop=function(a){var b;for(b=a.offsetTop;a=a.offsetParent;)b+=a.offsetTop;return b},c.prototype.isVisible=function(a){var b,c,d,e,f;return c=a.getAttribute("data-wow-offset")||this.config.offset,f=window.pageYOffset,e=f+this.element.clientHeight-c,d=this.offsetTop(a),b=d+a.clientHeight,e>=d&&b>=f},c.prototype.util=function(){return this._util||(this._util=new a)},c.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},c}()}).call(this);
;;(function($){var methods={init:function(settings){return this.each(function(){methods.destroy.call(this);this.opt=$.extend(true,{},$.fn.raty.defaults,settings);var that=$(this),inits=['number','readOnly','score','scoreName'];methods._callback.call(this,inits);if(this.opt.precision){methods._adjustPrecision.call(this);}
this.opt.number=methods._between(this.opt.number,0,this.opt.numberMax);this.stars=methods._createStars.call(this);this.score=methods._createScore.call(this);methods._apply.call(this,this.opt.score);if(this.opt.cancel){this.cancel=methods._createCancel.call(this);}
if(this.opt.width){that.css('width',this.opt.width);}
if(this.opt.readOnly){methods._lock.call(this);}else{that.css('cursor','pointer');methods._binds.call(this);}
methods._target.call(this,this.opt.score);that.data({'settings':this.opt,'raty':true});});},_adjustPrecision:function(){this.opt.targetType='score';this.opt.half=true;},_apply:function(score){if(score&&score>0){score=methods._between(score,0,this.opt.number);this.score.val(score);}
methods._fill.call(this,score);if(score){methods._roundStars.call(this,score);}},_between:function(value,min,max){return Math.min(Math.max(parseFloat(value),min),max);},_binds:function(){if(this.cancel){methods._bindCancel.call(this);}
methods._bindClick.call(this);methods._bindOut.call(this);methods._bindOver.call(this);},_bindCancel:function(){methods._bindClickCancel.call(this);methods._bindOutCancel.call(this);methods._bindOverCancel.call(this);},_bindClick:function(){var self=this,that=$(self);self.stars.on('click.raty',function(evt){self.score.val((self.opt.half||self.opt.precision)?that.data('score'):$(this).data('score'));if(self.opt.click){self.opt.click.call(self,parseFloat(self.score.val()),evt);}});},_bindClickCancel:function(){var self=this;self.cancel.on('click.raty',function(evt){self.score.removeAttr('value');if(self.opt.click){self.opt.click.call(self,null,evt);}});},_bindOut:function(){var self=this;$(this).on('mouseleave.raty',function(evt){var score=parseFloat(self.score.val())||undefined;methods._apply.call(self,score);methods._target.call(self,score,evt);if(self.opt.mouseout){self.opt.mouseout.call(self,score,evt);}});},_bindOutCancel:function(){var self=this;self.cancel.on('mouseleave.raty',function(evt){$(this).attr('class',self.opt.cancelOff);if(self.opt.mouseout){self.opt.mouseout.call(self,self.score.val()||null,evt);}});},_bindOverCancel:function(){var self=this;self.cancel.on('mouseover.raty',function(evt){$(this).attr('class',self.opt.cancelOn);self.stars.attr('class',self.opt.starOff);methods._target.call(self,null,evt);if(self.opt.mouseover){self.opt.mouseover.call(self,null);}});},_bindOver:function(){var self=this,that=$(self),action=self.opt.half?'mousemove.raty':'mouseover.raty';self.stars.on(action,function(evt){var score=parseInt($(this).data('score'),10);if(self.opt.half){var position=parseFloat((evt.pageX-$(this).offset().left)/(self.opt.size?self.opt.size:parseInt(that.css('font-size')))),plus=(position>.5)?1:.5;score=score-1+plus;methods._fill.call(self,score);if(self.opt.precision){score=score-plus+position;}
methods._roundStars.call(self,score);that.data('score',score);}else{methods._fill.call(self,score);}
methods._target.call(self,score,evt);if(self.opt.mouseover){self.opt.mouseover.call(self,score,evt);}});},_callback:function(options){for(var i in options){if(typeof this.opt[options[i]]==='function'){this.opt[options[i]]=this.opt[options[i]].call(this);}}},_createCancel:function(){var that=$(this),icon=this.opt.cancelOff,cancel=$('<i />',{class:icon,title:this.opt.cancelHint});if(this.opt.cancelPlace=='left'){that.prepend('&#160;').prepend(cancel);}else{that.append('&#160;').append(cancel);}
return cancel;},_createScore:function(){return $('<input />',{type:'hidden',name:this.opt.scoreName}).appendTo(this);},_createStars:function(){var that=$(this);for(var i=1;i<=this.opt.number;i++){var title=methods._getHint.call(this,i),icon=(this.opt.score&&this.opt.score>=i)?'starOn':'starOff';icon=this.opt[icon];$('<i />',{class:icon,title:title,'data-score':i}).appendTo(this);if(this.opt.space){that.append((i<this.opt.number)?'&#160;':'');}}
return that.children('i');},_error:function(message){$(this).html(message);$.error(message);},_fill:function(score){var self=this,hash=0;for(var i=1;i<=self.stars.length;i++){var star=self.stars.eq(i-1),select=self.opt.single?(i==score):(i<=score);if(self.opt.iconRange&&self.opt.iconRange.length>hash){var irange=self.opt.iconRange[hash],on=irange.on||self.opt.starOn,off=irange.off||self.opt.starOff,icon=select?on:off;if(i<=irange.range){star.attr('class',icon);}
if(i==irange.range){hash++;}}else{var icon=select?'starOn':'starOff';star.attr('class',this.opt[icon]);}}},_getHint:function(score){var hint=this.opt.hints[score-1];return(hint==='')?'':(hint||score);},_lock:function(){var score=parseInt(this.score.val(),10),hint=score?methods._getHint.call(this,score):this.opt.noRatedMsg;$(this).data('readonly',true).css('cursor','').attr('title',hint);this.score.attr('readonly','readonly');this.stars.attr('title',hint);if(this.cancel){this.cancel.hide();}},_roundStars:function(score){var rest=(score-Math.floor(score)).toFixed(2);if(rest>this.opt.round.down){var icon='starOn';if(this.opt.halfShow&&rest<this.opt.round.up){icon='starHalf';}else if(rest<this.opt.round.full){icon='starOff';}
this.stars.eq(Math.ceil(score)-1).attr('class',this.opt[icon]);}},_target:function(score,evt){if(this.opt.target){var target=$(this.opt.target);if(target.length===0){methods._error.call(this,'Target selector invalid or missing!');}
if(this.opt.targetFormat.indexOf('{score}')<0){methods._error.call(this,'Template "{score}" missing!');}
var mouseover=evt&&evt.type=='mouseover';if(score===undefined){score=this.opt.targetText;}else if(score===null){score=mouseover?this.opt.cancelHint:this.opt.targetText;}else{if(this.opt.targetType=='hint'){score=methods._getHint.call(this,Math.ceil(score));}else if(this.opt.precision){score=parseFloat(score).toFixed(1);}
if(!mouseover&&!this.opt.targetKeep){score=this.opt.targetText;}}
if(score){score=this.opt.targetFormat.toString().replace('{score}',score);}
if(target.is(':input')){target.val(score);}else{target.html(score);}}},_unlock:function(){$(this).data('readonly',false).css('cursor','pointer').removeAttr('title');this.score.removeAttr('readonly','readonly');for(var i=0;i<this.opt.number;i++){this.stars.eq(i).attr('title',methods._getHint.call(this,i+1));}
if(this.cancel){this.cancel.css('display','');}},cancel:function(click){return this.each(function(){if($(this).data('readonly')!==true){methods[click?'click':'score'].call(this,null);this.score.removeAttr('value');}});},click:function(score){return $(this).each(function(){if($(this).data('readonly')!==true){methods._apply.call(this,score);if(!this.opt.click){methods._error.call(this,'You must add the "click: function(score, evt) { }" callback.');}
this.opt.click.call(this,score,$.Event('click'));methods._target.call(this,score);}});},destroy:function(){return $(this).each(function(){var that=$(this),raw=that.data('raw');if(raw){that.off('.raty').empty().css({cursor:raw.style.cursor,width:raw.style.width}).removeData('readonly');}else{that.data('raw',that.clone()[0]);}});},getScore:function(){var score=[],value;$(this).each(function(){value=this.score.val();score.push(value?parseFloat(value):undefined);});return(score.length>1)?score:score[0];},readOnly:function(readonly){return this.each(function(){var that=$(this);if(that.data('readonly')!==readonly){if(readonly){that.off('.raty').children('i').off('.raty');methods._lock.call(this);}else{methods._binds.call(this);methods._unlock.call(this);}
that.data('readonly',readonly);}});},reload:function(){return methods.set.call(this,{});},score:function(){return arguments.length?methods.setScore.apply(this,arguments):methods.getScore.call(this);},set:function(settings){return this.each(function(){var that=$(this),actual=that.data('settings'),news=$.extend({},actual,settings);that.raty(news);});},setScore:function(score){return $(this).each(function(){if($(this).data('readonly')!==true){methods._apply.call(this,score);methods._target.call(this,score);}});}};$.fn.raty=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist!');}};$.fn.raty.defaults={cancel:false,cancelHint:'Cancel this rating!',cancelOff:'fa fa-fw fa-minus-square',cancelOn:'fa fa-fw fa-check-square',cancelPlace:'left',click:undefined,half:false,halfShow:true,hints:['bad','poor','regular','good','gorgeous'],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:'Not rated yet!',number:5,numberMax:20,precision:false,readOnly:false,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:'score',single:false,size:null,space:true,starHalf:'fa fa-fw fa-star-half-o',starOff:'fa fa-fw fa-star-o',starOn:'fa fa-fw fa-star',target:undefined,targetFormat:'{score}',targetKeep:false,targetText:'',targetType:'hint',width:false};})(jQuery);